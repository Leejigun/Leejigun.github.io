<!-- footer도 여기에 있음 -->


<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- iOS-tip 이라고 태그를 만들었으면 post에서는 iOS tip 이라고 태그를 줘야한다. -->
<!-- dynamically fixing the title for tag/author pages -->



    <title>Circle Timer 만들기_4_MVVM_Combine</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Combine을 활용해 MVVM 구조 잡기" />
    <link rel="shortcut icon" href="https://leejigun.github.io/assets/images/blog-icon.png" type="image/png" />
    <link rel="canonical" href="https://leejigun.github.io/Circle_Timer_4_MVVM_Combine" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="iOS 삽질 블로그" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Circle Timer 만들기_4_MVVM_Combine" />
    <meta property="og:description" content="Circle Timer 만들기_4_MVVM_Combine 앞서 타이머 UI를 만들었는데, 이제 실제 UI를 만들어 보려 한다. 실제 프로젝트에서는 RxSwift와 MVVM을 사용해 개발하는데, 이번에 SwiftUI로 화면을 만들기 시작했으니 이번 기회에 Combine을 사용해보려 한다. MVVM 예전에 SwiftUI와 MVVM에 대해서 글을 포스트를 올렸었다. 간단한 부분이었지만 이 포스트와 함께 보면 좋을 거 같다. SwiftUI, Combine, MVVM 1)" />
    <meta property="og:url" content="https://leejigun.github.io/Circle_Timer_4_MVVM_Combine" />
    <meta property="og:image" content="https://leejigun.github.io/assets/images/watchOS/2019-12-19-Circle_Timer_4_MVVM_Combine/background.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2019-12-24T00:17:00+09:00" />
    <meta property="article:modified_time" content="2019-12-24T00:17:00+09:00" />
    <meta property="article:tag" content="Watchos" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Circle Timer 만들기_4_MVVM_Combine" />
    <meta name="twitter:description" content="Circle Timer 만들기_4_MVVM_Combine 앞서 타이머 UI를 만들었는데, 이제 실제 UI를 만들어 보려 한다. 실제 프로젝트에서는 RxSwift와 MVVM을 사용해 개발하는데, 이번에 SwiftUI로 화면을 만들기 시작했으니 이번 기회에 Combine을 사용해보려 한다. MVVM 예전에 SwiftUI와 MVVM에 대해서 글을 포스트를 올렸었다. 간단한 부분이었지만 이 포스트와 함께 보면 좋을 거 같다. SwiftUI, Combine, MVVM 1)" />
    <meta name="twitter:url" content="https://leejigun.github.io/" />
    <meta name="twitter:image" content="https://leejigun.github.io/assets/images/watchOS/2019-12-19-Circle_Timer_4_MVVM_Combine/background.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="iOS 삽질 블로그" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Watchos" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "iOS 삽질 블로그",
        "logo": "https://leejigun.github.io/assets/images/blog-icon.png"
    },
    "url": "https://leejigun.github.io/Circle_Timer_4_MVVM_Combine",
    "image": {
        "@type": "ImageObject",
        "url": "https://leejigun.github.io/assets/images/watchOS/2019-12-19-Circle_Timer_4_MVVM_Combine/background.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://leejigun.github.io/Circle_Timer_4_MVVM_Combine"
    },
    "description": "Circle Timer 만들기_4_MVVM_Combine 앞서 타이머 UI를 만들었는데, 이제 실제 UI를 만들어 보려 한다. 실제 프로젝트에서는 RxSwift와 MVVM을 사용해 개발하는데, 이번에 SwiftUI로 화면을 만들기 시작했으니 이번 기회에 Combine을 사용해보려 한다. MVVM 예전에 SwiftUI와 MVVM에 대해서 글을 포스트를 올렸었다. 간단한 부분이었지만 이 포스트와 함께 보면 좋을 거 같다. SwiftUI, Combine, MVVM 1)"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Circle Timer 만들기_4_MVVM_Combine" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->

        <!-- HTML elements for search -->

        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <!-- 네비게이션 바 -->
<nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://leejigun.github.io/"><img src="/assets/images/blog-icon.png" alt="iOS 삽질 블로그" /></a>
            
        
        
            <!-- 여기서 navigation 에 표시할 이이템 추가 -->
<ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/ios/">iOS</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/watchos/">watchOS</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/rxswift/">RxSwift</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/swiftui/">swiftui</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/project/">project</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/ml/">ML</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/cs/">CS</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/flutter/">flutter</a></li>
    <li class="nav-try-ghost" role="menuitem"><a href="https://github.com/Leejigun">github</a></li>
    <li class="nav-try-ghost" role="menuitem"><a href="https://leejigun.notion.site/d96873c479d049cbb3f2476aa7990347?v=84936e8007664a6daaa211463819028d">notion</a></li>
    <li class="nav-try-ghost" role="menuitem"><a href="/search.html">Search</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-getting-started ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="24 December 2019">24 December 2019</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/watchos/'>WATCHOS</a>,
                            
                        
                            
                               <a href='/tag/swiftui/'>SWIFTUI</a>,
                            
                        
                            
                               <a href='/tag/project/'>PROJECT</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Circle Timer 만들기_4_MVVM_Combine</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/images/watchOS/2019-12-19-Circle_Timer_4_MVVM_Combine/background.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h1 id="circle-timer-만들기_4_mvvm_combine">Circle Timer 만들기_4_MVVM_Combine</h1>

<p>앞서 타이머 UI를 만들었는데, 이제 실제 UI를 만들어 보려 한다. 실제 프로젝트에서는 RxSwift와 MVVM을 사용해 개발하는데, 이번에 SwiftUI로 화면을 만들기 시작했으니 이번 기회에 Combine을 사용해보려 한다.</p>

<h2 id="mvvm">MVVM</h2>

<p>예전에 SwiftUI와 MVVM에 대해서 글을 포스트를 올렸었다. 간단한 부분이었지만 이 포스트와 함께 보면 좋을 거 같다.</p>

<p><a href="https://leejigun.github.io/SwiftUI,Combine,MVVM_1">SwiftUI, Combine, MVVM 1) - Financing UI</a>-Financing)</p>

<p>mvvm 아키텍처를 사용하기 위해서 view model 클래스를 만들어준다.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">MainFrontViewModel</span><span class="p">:</span> <span class="kt">ObservableObject</span> <span class="p">{</span>
	<span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>
<p>우리가 만든 타이머에서 view와 커뮤니케이션 하는 부분을 생각해보자. 먼저 타이머 기능에 필요한 부분이 뭐가 있을까?</p>

<ul>
  <li>카운트 다운 이기 때문에 시간이 점점 줄어드는 형식이다. 따라서 줄어들 처음 시간값이 필요하.</li>
  <li>시간이 줄어듬에 따라서 붉은 부분이 감소해야 하기 때문에 지금 시간값을 알아야 한다.</li>
  <li>우리는 360도 중에서 어디에 시간부가 위치해야 할지 알아야 하기 때문에 각도 값이 필요하다.</li>
</ul>

<p>그래서 3개의 변수를 만들었다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// 360도 중에서 지금 어디인지</span>
<span class="kd">@Published</span> <span class="k">var</span> <span class="nv">angle</span><span class="p">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mi">360</span> <span class="p">{</span>
<span class="c1">/// 전체 범위</span>
<span class="kd">@Published</span> <span class="k">var</span> <span class="nv">maxSecond</span><span class="p">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mi">600</span> <span class="c1">// 10분</span>
<span class="c1">/// 현재 위치</span>
<span class="kd">@Published</span> <span class="k">var</span> <span class="nv">currentSecond</span><span class="p">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mi">600</span>
</code></pre></div></div>

<p>그리고 카운트 다운을 타이머니까 카운트 다운을 시작 종료 하는 메소드를 정의해야 한다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protocol</span> <span class="kt">TimerProtocol</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">startCountDown</span><span class="p">()</span>
    <span class="kd">func</span> <span class="nf">pauseCountDown</span><span class="p">()</span>
    <span class="kd">func</span> <span class="nf">stopCountDown</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<p>다음으로 타이머 관련 변수를 확인해보자. Timer를 Combine에서 사용하는 방법을 찾아보니 쉽게 나온다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">static</span> <span class="k">let</span> <span class="nv">timeInterval</span><span class="p">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mf">0.1</span>

<span class="c1">/// Timer -&gt; Publisher</span>
<span class="kd">private</span> <span class="k">let</span> <span class="nv">currentTimePublisher</span>
  <span class="o">=</span> <span class="kt">Timer</span><span class="o">.</span><span class="kt">TimerPublisher</span><span class="p">(</span><span class="nv">interval</span><span class="p">:</span> <span class="n">timeInterval</span><span class="p">,</span> <span class="nv">runLoop</span><span class="p">:</span> <span class="o">.</span><span class="n">main</span><span class="p">,</span><span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">)</span>
<span class="c1">/// 카운트 다운</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">cancellable</span><span class="p">:</span> <span class="kt">AnyCancellable</span><span class="p">?</span>
</code></pre></div></div>

<ul>
  <li>Timer에 있는 TimerPublisher 생성자를 통해서 Publisher를 만든다.</li>
  <li>로직이 붙은 Publisher에서 나온 cancellable을 변수에 저장한다. (Rx에서 disposeable과 같은 개념)</li>
</ul>

<p>카운트 다운을 시작해 달라고 요청하면 Publisher에 로직을 붙여 cancellable을 만든다.</p>

<p>weak self를 사용하는 이유는 메모리 관리 측면과 timer의 경우 잘못하면 해지되지 않는 문제가 생길 수 있기 때문에 추가했다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// 카운트 다운 시작</span>
<span class="kd">func</span> <span class="nf">startCountDown</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cancellable</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
		<span class="k">self</span><span class="o">.</span><span class="n">isCountdown</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="k">let</span> <span class="nv">timer</span> <span class="o">=</span> <span class="n">currentTimePublisher</span><span class="o">.</span><span class="nf">autoconnect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">sink</span> <span class="p">{[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">in</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">self</span> <span class="o">=</span> <span class="k">self</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        <span class="k">self</span><span class="o">.</span><span class="n">currentSecond</span> <span class="o">-=</span> <span class="kt">ViewModelType</span><span class="o">.</span><span class="n">timeInterval</span>
        <span class="k">let</span> <span class="nv">percent</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">currentSecond</span> <span class="o">/</span> <span class="k">self</span><span class="o">.</span><span class="n">maxSecond</span> <span class="o">*</span> <span class="mi">100</span>
        <span class="k">self</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mf">360.0</span> <span class="o">*</span> <span class="n">percent</span> <span class="o">/</span> <span class="mi">100</span>

        <span class="k">if</span> <span class="k">self</span><span class="o">.</span><span class="n">currentSecond</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="nf">stopCountDown</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">self</span><span class="o">.</span><span class="n">cancellable</span> <span class="o">=</span> <span class="n">timer</span>
<span class="p">}</span>

<span class="c1">/// 카운트 다운이 끝나는 경우</span>
<span class="kd">func</span> <span class="nf">stopCountDown</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">cancellable</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
    <span class="k">self</span><span class="o">.</span><span class="n">currentSecond</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">self</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">self</span><span class="o">.</span><span class="n">isCountdown</span> <span class="o">=</span> <span class="kc">false</span>
<span class="p">}</span>
</code></pre></div></div>
<p>여기서 추가적으로 isCountdown 플래그를 만들어 UI 변화를 줄 예정이다.</p>

<p>뷰 모델을 적용하면 다음과 같다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// MainFrontView.swift</span>
<span class="o">...</span>
<span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">viewModel</span> <span class="o">=</span> <span class="kt">MainFrontViewModel</span><span class="p">()</span>
<span class="o">...</span>
<span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>

<span class="kt">GeometryReader</span> <span class="p">{</span> <span class="n">geometryProxy</span> <span class="k">in</span>
    <span class="kt">TimerShape</span><span class="p">(</span><span class="nv">endDegrees</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">viewModel</span><span class="o">.</span><span class="n">angle</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">cornerRadius</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="nv">antialiased</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">gesture</span><span class="p">(</span><span class="kt">DragGesture</span><span class="p">()</span><span class="o">.</span><span class="n">onChanged</span> <span class="p">{</span> <span class="n">value</span> <span class="k">in</span>
            <span class="c1">// 카운트 다운이 시작되고 있으면 시간 변경 못하게</span>
            <span class="k">if</span> <span class="k">self</span><span class="o">.</span><span class="n">viewModel</span><span class="o">.</span><span class="n">isCountdown</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="k">let</span> <span class="nv">minSize</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">geometryProxy</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
                              <span class="n">geometryProxy</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">size</span> <span class="o">=</span> <span class="kt">CGSize</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="n">minSize</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="n">minSize</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">angle</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="nf">getAngle</span><span class="p">(</span><span class="nv">center</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span>
                                                      <span class="nv">y</span><span class="p">:</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">),</span>
                                      <span class="nv">target</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
            <span class="c1">// 각도계가 뒤집힌 형태여야 하니까 360에서 빼준다.</span>
            <span class="k">self</span><span class="o">.</span><span class="n">viewModel</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mf">360.0</span> <span class="o">-</span> <span class="kt">Double</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="p">},</span><span class="nv">including</span><span class="p">:</span> <span class="o">.</span><span class="n">gesture</span><span class="p">)</span>
        <span class="o">.</span><span class="n">onLongPressGesture</span> <span class="p">{</span>
						<span class="c1">// 롱 클릭으로 시작 종료를 했다.</span>
            <span class="k">if</span> <span class="o">!</span><span class="k">self</span><span class="o">.</span><span class="n">viewModel</span><span class="o">.</span><span class="n">isCountdown</span> <span class="p">{</span>
                <span class="k">self</span><span class="o">.</span><span class="n">viewModel</span><span class="o">.</span><span class="nf">startCountDown</span><span class="p">()</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">self</span><span class="o">.</span><span class="n">viewModel</span><span class="o">.</span><span class="nf">stopCountDown</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="n">geometryProxy</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
               <span class="nv">height</span><span class="p">:</span> <span class="n">geometryProxy</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
               <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>
<span class="p">}</span>
<span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">idealWidth</span><span class="p">:</span> <span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
       <span class="nv">maxWidth</span><span class="p">:</span> <span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
       <span class="nv">idealHeight</span><span class="p">:</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
       <span class="nv">maxHeight</span><span class="p">:</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
       <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>

<span class="p">}</span>
</code></pre></div></div>
<p>아직 미흡한 부분이 많은데 조금씩 수정해 나가자.</p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            this.page.url = 'https://leejigun.github.io/';
                            this.page.identifier = 'iOS 삽질 블로그';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://jglee.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; iOS 삽질 블로그 &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/watchos/">Watchos</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/SwiftUI_page_based_navigation">SwiftUI에서 page based navigation 사용하기</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/Circle_Timer_3_User_Interation">Circle Timer 만들기_3_User_Interation(SwiftUI, gesture, DragGesture)</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/Circle_Timer_2_SwiftUI_CoreGraphics_Shape">Circle Timer 만들기_2(SwiftUI, CoreGraphics, Shape)</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/watchos/">
                                
                                    See all 5 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/SwiftUI_page_based_navigation">
                <div class="post-card-image" style="background-image: url(/assets/images/watchOS/2019-12-23-SwiftUI_page_based_navigation/background.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/SwiftUI_page_based_navigation">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Watchos</span>
                            
                        
                            
                               <span class="post-card-tags">Swiftui</span>
                            
                        
                            
                                <span class="post-card-tags">Project</span>
                            
                        
                    

                    <h2 class="post-card-title">SwiftUI에서 page based navigation 사용하기</h2>
                </header>
                <section class="post-card-excerpt">
                    <p># SwiftUI에서 page based navigation 사용하기 apple watch의 UI 베이스는 주로 page base navigation 형태를 취하고 있다. apple watch는 작은 화면에서 사용자에게 같은 레벨의 UI를 제공하기 위해 페이지 형태를 제공하고 있다. ![](assets/images/watchOS/2019-12-23-SwiftUI_page_based_navigation/Untitled.png) [Designing</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/Circle_Timer_3_User_Interation">
                <div class="post-card-image" style="background-image: url(/assets/images/watchOS/2019-12-19-Circle_Timer_3_User_Interation/background.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/Circle_Timer_3_User_Interation">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Watchos</span>
                            
                        
                            
                               <span class="post-card-tags">Swiftui</span>
                            
                        
                            
                                <span class="post-card-tags">Project</span>
                            
                        
                    

                    <h2 class="post-card-title">Circle Timer 만들기_3_User_Interation(SwiftUI, gesture, DragGesture)</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>Circle Timer 만들기_3_User_Interation(SwiftUI, gesture, DragGesture) 이제 타임 타이머와 마찬가지로 손가락을 이용해서 시간을 설정할 수 있는 기능을 넣겠습니다. 손가락으로 시간을 변경 하려면 사용자의 drag 제스쳐를 잡아낼 수 있어야 합니다. 사전에 만든 CircleShape를 화면에 붙여줍니다.</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://leejigun.github.io/">
            
                <img src="/assets/images/blog-icon.png" alt="iOS 삽질 블로그 icon" />
            
            <span>iOS 삽질 블로그</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Circle Timer 만들기_4_MVVM_Combine</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Circle+Timer+%EB%A7%8C%EB%93%A4%EA%B8%B0_4_MVVM_Combine&amp;url=https://leejigun.github.io/Circle_Timer_4_MVVM_Combine"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://leejigun.github.io/Circle_Timer_4_MVVM_Combine"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://leejigun.github.io/">iOS 삽질 블로그</a> &copy; 2025</section>
                <section class="poweredby">Github page blog of <a href="https://github.com/Leejigun">Leejigun</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <!-- <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a> -->
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-154736789-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
