<!-- footer도 여기에 있음 -->


<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- iOS-tip 이라고 태그를 만들었으면 post에서는 iOS tip 이라고 태그를 줘야한다. -->
<!-- dynamically fixing the title for tag/author pages -->



    <title>SwiftUI, Combine, MVVM 1) - Financing UI</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Dribbble을 보고 UI를 만들어보자." />
    <link rel="shortcut icon" href="https://leejigun.github.io//assets/images/blog-icon.png" type="image/png" />
    <link rel="canonical" href="https://leejigun.github.io//SwftUI,Combine,MVVM_1)-Financing" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="iOS 삽질 블로그" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="SwiftUI, Combine, MVVM 1) - Financing UI" />
    <meta property="og:description" content="SwftUI, Combine MVVM - Financing 이전 포스트에서는 주로 SwiftUI를 공부하면서 화면을 디자인해보는 작업을 진행했었다. 이런 연습은 예전에 Flutter를 공부할 때 어느 유튜버가 매일매일 화면을 만드는 영상을 올렸던 것을 보고 따라 하기 시작한 것으로 처음 Flutter를 공부할 때 많이 도움이 되었다. SwiftUI는 Flutter와 정말 많은 부분이 비슷하다. 단순히 코드로 화면을 만드는" />
    <meta property="og:url" content="https://leejigun.github.io//SwftUI,Combine,MVVM_1)-Financing" />
    <meta property="og:image" content="https://leejigun.github.io//assets/images/SwiftUI/Financing_App_Volume_1.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2019-09-09T09:00:01+09:00" />
    <meta property="article:modified_time" content="2019-09-09T09:00:01+09:00" />
    <meta property="article:tag" content="Swiftui" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="SwiftUI, Combine, MVVM 1) - Financing UI" />
    <meta name="twitter:description" content="SwftUI, Combine MVVM - Financing 이전 포스트에서는 주로 SwiftUI를 공부하면서 화면을 디자인해보는 작업을 진행했었다. 이런 연습은 예전에 Flutter를 공부할 때 어느 유튜버가 매일매일 화면을 만드는 영상을 올렸던 것을 보고 따라 하기 시작한 것으로 처음 Flutter를 공부할 때 많이 도움이 되었다. SwiftUI는 Flutter와 정말 많은 부분이 비슷하다. 단순히 코드로 화면을 만드는" />
    <meta name="twitter:url" content="https://leejigun.github.io//" />
    <meta name="twitter:image" content="https://leejigun.github.io//assets/images/SwiftUI/Financing_App_Volume_1.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="iOS 삽질 블로그" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Swiftui" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "iOS 삽질 블로그",
        "logo": "https://leejigun.github.io//assets/images/blog-icon.png"
    },
    "url": "https://leejigun.github.io//SwftUI,Combine,MVVM_1)-Financing",
    "image": {
        "@type": "ImageObject",
        "url": "https://leejigun.github.io//assets/images/SwiftUI/Financing_App_Volume_1.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://leejigun.github.io//SwftUI,Combine,MVVM_1)-Financing"
    },
    "description": "SwftUI, Combine MVVM - Financing 이전 포스트에서는 주로 SwiftUI를 공부하면서 화면을 디자인해보는 작업을 진행했었다. 이런 연습은 예전에 Flutter를 공부할 때 어느 유튜버가 매일매일 화면을 만드는 영상을 올렸던 것을 보고 따라 하기 시작한 것으로 처음 Flutter를 공부할 때 많이 도움이 되었다. SwiftUI는 Flutter와 정말 많은 부분이 비슷하다. 단순히 코드로 화면을 만드는"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="SwiftUI, Combine, MVVM 1) - Financing UI" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->

        <!-- HTML elements for search -->

        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <!-- 네비게이션 바 -->
<nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://leejigun.github.io//"><img src="/assets/images/blog-icon.png" alt="iOS 삽질 블로그" /></a>
            
        
        
            <!-- 여기서 navigation 에 표시할 이이템 추가 -->
<ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/ios/">iOS</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/watchos/">watchOS</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/rxswift/">RxSwift</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/swiftui/">swiftui</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/project/">project</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/ml/">ML</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/cs/">CS</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/flutter/">flutter</a></li>
    <li class="nav-try-ghost" role="menuitem"><a href="https://github.com/Leejigun">github</a></li>
    <li class="nav-try-ghost" role="menuitem"><a href="https://leejigun.notion.site/d96873c479d049cbb3f2476aa7990347?v=84936e8007664a6daaa211463819028d">notion</a></li>
    <li class="nav-try-ghost" role="menuitem"><a href="/search.html">Search</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-getting-started ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 9 September 2019"> 9 September 2019</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/swiftui/'>SWIFTUI</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">SwiftUI, Combine, MVVM 1) - Financing UI</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/images/SwiftUI/Financing_App_Volume_1.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h1 id="swftui-combine-mvvm---financing">SwftUI, Combine MVVM - Financing</h1>

<p>이전 포스트에서는 주로 SwiftUI를 공부하면서 화면을 디자인해보는 작업을 진행했었다. 이런 연습은 예전에 Flutter를 공부할 때 어느 유튜버가 매일매일 화면을 만드는 영상을 올렸던 것을 보고 따라 하기 시작한 것으로 처음 Flutter를 공부할 때 많이 도움이 되었다.
 SwiftUI는 Flutter와 정말 많은 부분이 비슷하다. 단순히 코드로 화면을 만드는 행위뿐만이 아니라 화면을 작은 뷰 단위로 분할해서 공략해 나가고 View와 로직을 분리하는 접근 방식이 익숙해지면 몹시 간결해진다.
 이번 포스트에서는 SwiftUI로 절반 정도 화면을 만들고 ViewModel을 붙여봤다.</p>

<ul>
  <li>https://dribbble.com/shots/7096764-Financing-App-Volume-1</li>
</ul>

<h2 id="원본-화면">원본 화면</h2>

<p>일단 절반 정도만 진행하고 이번에는 ViewModel을 붙여보려 한다.</p>

<p><img src="https://paper-attachments.dropbox.com/s_199A3E953151944B18DB109B9C152FCE49633CADF171E0396CFB88F9F527F320_1568010213987_image.png" alt="원본" />
<img src="https://paper-attachments.dropbox.com/s_199A3E953151944B18DB109B9C152FCE49633CADF171E0396CFB88F9F527F320_1568011578137_image.png" alt="1차 완성" /></p>

<h2 id="화면-구성">화면 구성</h2>

<p>이번 포스트에서 진행할 화면 구성은 다음과 같습니다.</p>

<ul>
  <li>상단 네비게이션바</li>
  <li>중단 사용자 정보</li>
  <li>하단 버튼 그룹</li>
  <li>하단 내 카드 목록</li>
</ul>

<p><img src="https://paper-attachments.dropbox.com/s_199A3E953151944B18DB109B9C152FCE49633CADF171E0396CFB88F9F527F320_1568010502185_image.png" alt="" /></p>

<p>특이 사항은 다음과 같습니다.
 상단 네비게이션 바의 오른쪽 벨 버튼의 붉은 배찌는 클릭하면 사라진다.
 (원래는 복잡한 로직이 있어야 하지만 나타나고 사라지게 하는 이벤트를 중심으로 넣습니다.)
 하단 사용자 카드 목록은 See All을 클릭하면 늘어나고 줄어들도록 한다.</p>

<p>일단 이번 포스트에서는 여기까지만 적용하고 추가적으로 각종 상태 값들을 뷰 모델을 만들어 바인드 해보려 합니다.</p>

<h2 id="네비게이션바">네비게이션바</h2>
<p><img src="https://paper-attachments.dropbox.com/s_199A3E953151944B18DB109B9C152FCE49633CADF171E0396CFB88F9F527F320_1568011365431_image.png" alt="" /></p>

<p>상단 네비게이션 바를 그리기 앞서 배경에 파 색 백그라운드 뷰가 깔려있는 모습을 먼저 고민했다.
 고민하다가 나온 결론은 상단을 스택으로 감싸고 마지막 버튼 부분에서 하단으로 여백을 줘서 파란 부분 전체를 하나의 스택으로 구성하도록 했다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kt">VStack</span> <span class="p">{</span>
    <span class="c1">// 컨텐츠</span>
    <span class="p">}</span><span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">51</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                       <span class="nv">green</span><span class="p">:</span> <span class="mi">104</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                       <span class="nv">blue</span><span class="p">:</span> <span class="mi">252</span><span class="o">/</span><span class="mi">255</span><span class="p">))</span>
</code></pre></div></div>
<p>이제 네비게이션 바를 구현해본다. 네비게이션 바는 왼쪽에 <strong>Wallet</strong> 이라는 타이틀과 오른쪽에 벨 형태의 버튼이 붙어있는 형태다. 오른쪽에 벨 아이콘은 붉은색 배찌가 붙어있어서 클릭하면 배찌가 사라지도록 하려한다.
 보통은 여기에 로직이 붙어있어서 새로운 알람이 있다면 배찌를 키고 알람을 다 확인하면 배찌를 사라지게 하는 형식으로 처리하는데 뒷단이 없기 때문에 다른 로직은 제거한다.
 배찌 역시 직접 그리기도 하지만 내가 했던 대부분의 프로젝트에서는 배찌가 있는 이미지가 따로 있었다. 이번에는 그런 지원이 없기 때문에 그려서 대충 위치에 올리려 한다.</p>

<p><img src="https://paper-attachments.dropbox.com/s_199A3E953151944B18DB109B9C152FCE49633CADF171E0396CFB88F9F527F320_1568012258525_image.png" alt="" /></p>

<p>일단 화면에 Wallet 텍스트만 추가해봤다.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
      <span class="kt">VStack</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
          <span class="kt">Text</span><span class="p">(</span><span class="s">"Wallet"</span><span class="p">)</span>
          <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.7</span><span class="p">))</span>
          <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="kt">Font</span><span class="o">.</span><span class="nf">system</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">design</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">))</span>
          <span class="o">.</span><span class="nf">bold</span><span class="p">()</span>
        <span class="p">}</span><span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">51</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                           <span class="nv">green</span><span class="p">:</span> <span class="mi">104</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                           <span class="nv">blue</span><span class="p">:</span> <span class="mi">252</span><span class="o">/</span><span class="mi">255</span><span class="p">))</span>
      <span class="p">}</span>
      <span class="o">.</span><span class="nf">edgesIgnoringSafeArea</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">)</span>
      <span class="o">.</span><span class="nf">edgesIgnoringSafeArea</span><span class="p">(</span><span class="o">.</span><span class="n">bottom</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></div></div>
<p>그냥 배경에 테이터만 들어간 이상한 형태다. 하지만 컨텐츠 배경에만 파란색이 들어간 목적은 달성했다. 이제 이걸 상단부터 쌓아 내려가본다.</p>

<p>HStack으로 감싸고 옆에 버튼을 그려넣었다. 참고로 포스트에서 사용되는 아이콘은 iOS 13부터 추가된 시스템 이미지로 iOS13 SF Symbols 검색하면 여러가지 아이콘들을 쉽게 검색해서 추가할 수 있다.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kt">ZStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
      <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"bell.fill"</span><span class="p">)</span>
          <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
          <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>
          <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
          <span class="o">.</span><span class="nf">scaledToFit</span><span class="p">()</span>
      <span class="kt">Circle</span><span class="p">()</span>
          <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
          <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
          <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
          <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">trailing</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></div></div>
<p>상단부터 쌓고 싶어서 네비게이션 밑으로 Spacer() 를 넣어봤다. Spacer는 낮은 우선순위로 공간을 확장하는 컨포넌트로 양쪽 끝으로 붙이거나 동일한 간격을 유지하고 싶을 때 사용하면 유용하다.</p>

<p><img src="https://paper-attachments.dropbox.com/s_199A3E953151944B18DB109B9C152FCE49633CADF171E0396CFB88F9F527F320_1568012647831_image.png" alt="" /></p>

<p>Spacer 를 넣었더니 문제가 생겼다. <strong>.edgesIgnoringSafeArea(.top)</strong> 를 사용하니 상단으로 공간이 넘어가 버린것이다. 이를 해결하기 위해서 상단에 적당한 padding을 넣어야 한다.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kt">HStack</span> <span class="p">{</span>
    <span class="c1">// 타이틀</span>
    <span class="c1">// 아이콘</span>
    <span class="p">}</span>
    <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">statusBarFrame</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
</code></pre></div></div>
<p><img src="https://paper-attachments.dropbox.com/s_199A3E953151944B18DB109B9C152FCE49633CADF171E0396CFB88F9F527F320_1568013240185_image.png" alt="" /></p>

<p>이제 여기에 버튼에 배찌가 나타나고 사라지게 하는 상태값의 적용이 필요하다.
  State 변수를 추가한다. 그리고 알파값에 변수를 바인드해준다.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">struct</span> <span class="kt">MainContentsView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
      <span class="kd">@State</span> <span class="k">var</span> <span class="nv">isNew</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="o">...</span>
    <span class="kt">Circle</span><span class="p">()</span>
      <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
      <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
      <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
      <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">trailing</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
      <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="n">isNew</span> <span class="p">?</span> <span class="mf">1.0</span> <span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
    <span class="o">...</span>
    <span class="p">}</span>
</code></pre></div></div>
<p>이제 isNew가 true면 알파값이 1.0이고 false면 알파값이 0이 되서 나타나고 사라지게 된다.
 여기에 이벤트를 클릭 이벤트를 넣어보자.
 클릭 이벤트를 넣는 방법은 2가지가 있다. 일반적으로 사용하는 방법인 Button 뷰로 감싸서 처리하는 방법과 tapAction이라는 모디파이어를 사용해서 액션을 붙여넣는 방법이 있다.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// Button</span>
    <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span>
      <span class="k">self</span><span class="o">.</span><span class="n">isNew</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
    <span class="p">})</span> <span class="p">{</span>
      <span class="kt">ZStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
          <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"bell.fill"</span><span class="p">)</span>
              <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
              <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>
              <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
              <span class="o">.</span><span class="nf">scaledToFit</span><span class="p">()</span>
          <span class="kt">Circle</span><span class="p">()</span>
              <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
              <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
              <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
              <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">trailing</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
              <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="n">isNew</span> <span class="p">?</span> <span class="mf">1.0</span> <span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// tapAction</span>
    <span class="kt">ZStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"bell.fill"</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">scaledToFit</span><span class="p">()</span>
        <span class="kt">Circle</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">trailing</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="n">isNew</span> <span class="p">?</span> <span class="mf">1.0</span> <span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">}</span><span class="o">.</span><span class="n">tapAction</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">isNew</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div></div>
<p>두가지 방법 모두 별 문제 없이 잘 동작한다.</p>

<h2 id="코드-분리">코드 분리</h2>

<p>하나의 화면이 만들어졌으면 이제 이걸 다른 Struct로 분리해서 처리해보자. Flutter나 Texture를 해보면 알겠지만, 이렇게 코드로 화면을 만드는 방법은 조금만 화면이 복잡해지면 코드는 엄청나게 길어지면서 보기 힘들어진다. 그래서 뷰 하나 하나를 다른 클레스나 구조체로 뽑아내서 관리해줘야 코드 관리가 편하다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">fileprivate</span> <span class="kd">struct</span> <span class="kt">HomeNavigationBar</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
      <span class="kd">@Binding</span> <span class="k">var</span> <span class="nv">isNew</span><span class="p">:</span> <span class="kt">Bool</span>
      <span class="c1">// 네비게이션바</span>
      <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
          <span class="kt">HStack</span> <span class="p">{</span>
              <span class="kt">Text</span><span class="p">(</span><span class="s">"Wallet"</span><span class="p">)</span>
                  <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.7</span><span class="p">))</span>
                  <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="kt">Font</span><span class="o">.</span><span class="nf">system</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">design</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">))</span>
                  <span class="o">.</span><span class="nf">bold</span><span class="p">()</span>

              <span class="kt">Spacer</span><span class="p">()</span>
              <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span>
                  <span class="k">self</span><span class="o">.</span><span class="n">isNew</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
              <span class="p">})</span> <span class="p">{</span>
                  <span class="kt">ZStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
                      <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"bell.fill"</span><span class="p">)</span>
                          <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
                          <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>
                          <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
                          <span class="o">.</span><span class="nf">scaledToFit</span><span class="p">()</span>
                      <span class="kt">Circle</span><span class="p">()</span>
                          <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
                          <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
                          <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
                          <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">trailing</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
                          <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="n">isNew</span> <span class="p">?</span> <span class="mf">1.0</span> <span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
                  <span class="p">}</span>
              <span class="p">}</span>
          <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>
<p>특이점으로는 <strong>@Binding</strong> 으로 기존에 State에서 Binding으로 변경한 부분이다. 상위에 적용된 State를 그대로 가져다가 사용한다는 의미로 말 그대로 bind 한다. RxSwift를 사용해본 경험이 있다면 bind에 익숙할 것이다. 행위는 다르지만 의미는 비슷하다.
 나머지는 너무 길어지니까 그냥 코드로 보면 결국에는 다음과 같다.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">struct</span> <span class="kt">MainContentsView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>

      <span class="kd">@State</span> <span class="k">var</span> <span class="nv">isNew</span> <span class="o">=</span> <span class="kc">true</span>
      <span class="kd">@State</span> <span class="k">var</span> <span class="nv">userMoney</span> <span class="o">=</span> <span class="s">"0.00"</span>
      <span class="kd">@State</span> <span class="k">var</span> <span class="nv">userGrade</span> <span class="o">=</span> <span class="s">"Premium"</span>
      <span class="kd">@State</span> <span class="k">var</span> <span class="nv">isSeeAll</span> <span class="o">=</span> <span class="kc">false</span>
      <span class="kd">@State</span> <span class="k">var</span> <span class="nv">myCards</span> <span class="o">=</span> <span class="p">[</span><span class="kt">HomeCardInfo</span><span class="p">(),</span><span class="kt">HomeCardInfo</span><span class="p">()]</span>

      <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
          <span class="kt">VStack</span> <span class="p">{</span>
              <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
                  <span class="c1">// 네비게이션바</span>
                  <span class="kt">HomeNavigationBar</span><span class="p">(</span><span class="nv">isNew</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">isNew</span><span class="p">)</span>
                      <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
                      <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
                  <span class="c1">// 사용자 금액과 등급을 표시하는 부분</span>
                  <span class="kt">HomeUserInfoView</span><span class="p">(</span><span class="nv">userMoney</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">userMoney</span><span class="p">,</span>
                                   <span class="nv">userGrade</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">userGrade</span><span class="p">)</span>
                      <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
                  <span class="c1">// 입급 출금 버튼 그룹</span>
                  <span class="kt">HomeButtonsView</span><span class="p">()</span>
                      <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">bottom</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
              <span class="p">}</span><span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">51</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                                 <span class="nv">green</span><span class="p">:</span> <span class="mi">104</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                                 <span class="nv">blue</span><span class="p">:</span> <span class="mi">252</span><span class="o">/</span><span class="mi">255</span><span class="p">))</span>
              <span class="c1">// 중간 내 카드 표시 부분</span>
              <span class="kt">HomeMyCardList</span><span class="p">(</span><span class="nv">isSeeAll</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">isSeeAll</span><span class="p">,</span>
                             <span class="nv">myCards</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">myCards</span><span class="p">)</span>
                  <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">)</span>
                  <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

              <span class="kt">Spacer</span><span class="p">()</span>

          <span class="p">}</span>
          <span class="o">.</span><span class="nf">edgesIgnoringSafeArea</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">)</span>
          <span class="o">.</span><span class="nf">edgesIgnoringSafeArea</span><span class="p">(</span><span class="o">.</span><span class="n">bottom</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<p><img src="https://paper-attachments.dropbox.com/s_199A3E953151944B18DB109B9C152FCE49633CADF171E0396CFB88F9F527F320_1568093884967_image.png" alt="See All Off" />
<img src="https://paper-attachments.dropbox.com/s_199A3E953151944B18DB109B9C152FCE49633CADF171E0396CFB88F9F527F320_1568093903451_image.png" alt="See All On" /></p>

<p>자세한 코드는 맨 하단에 표시합니다.</p>

<h2 id="viewmodel-combine">ViewModel Combine</h2>

<p>대충 1차적으로 완성된 화면에서 상태를 나타내는 부분은 다음과 같다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">isNew</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">userMoney</span> <span class="o">=</span> <span class="s">"0.00"</span>
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">userGrade</span> <span class="o">=</span> <span class="s">"Premium"</span>
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">isSeeAll</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">myCards</span> <span class="o">=</span> <span class="p">[</span><span class="kt">HomeCardInfo</span><span class="p">(),</span><span class="kt">HomeCardInfo</span><span class="p">()]</span>
</code></pre></div></div>
<p>이 부분이 변경되면 화면이 변경된다. 원래 기존에 UIKit을 사용할 때부터 RxSwift와 MVVM 패턴을 사용했던 입장에서는 이번 iOS의 변경점이 너무나도 고마웠다. 다른 포스트에서도 말했는데, MVVM에서의 핵심은 Input과 Output을 구분하는 것으로 시작한다고 말씀드렸습니다.
그래서 제가 사용하던 기존의 MVVM 방식에서는 Input과 Outpu의 구조체를 만들어 물리적(?)으로 input과 output을 완전히 분리해버렸습니다. 간단한 로직이라도 Input을 정의하고 Output을 정의해야 하는 불편함은 있었지만 그럼에도 불구하고 유지보수가 쉽고 코드 자체가 명확했습니다.
SwiftUI에서 역시 Input과 Output을 분리하고 있습니다. 하지만 앞선 살펴본 isNew의 경우에는 값에 따라 화면을 그리기 때문에 Output이지만 벨 아이콘을 클릭하면 isNew 변수를 toggle 하기 때문에 input도 같이 수행하고 있습니다. 아직 엄격하게 분리했다고 볼 수는 없지만 앞으로 수정해 나가야 할 부분이라 생각합니다.</p>

<p>제가 만든 뷰 모델은 다음과 같습니다.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">import</span> <span class="kt">Foundation</span>
    <span class="kd">import</span> <span class="kt">Combine</span>
    <span class="kd">import</span> <span class="kt">SwiftUI</span>

    <span class="kd">class</span> <span class="kt">MainContentsViewModel</span><span class="p">:</span> <span class="kt">BindableObject</span> <span class="p">{</span>
        <span class="k">var</span> <span class="nv">willChange</span> <span class="o">=</span> <span class="kt">PassthroughSubject</span><span class="o">&lt;</span><span class="kt">Void</span><span class="p">,</span> <span class="kt">Never</span><span class="o">&gt;</span><span class="p">()</span>

        <span class="kd">private</span> <span class="k">var</span> <span class="nv">totalCards</span> <span class="o">=</span> <span class="p">[</span><span class="kt">HomeCardInfo</span><span class="p">(),</span><span class="kt">HomeCardInfo</span><span class="p">(),</span><span class="kt">HomeCardInfo</span><span class="p">(),</span><span class="kt">HomeCardInfo</span><span class="p">()]</span>

        <span class="c1">/// 상단 벨 아이콘에 배찌 표시 여부</span>
        <span class="k">var</span> <span class="nv">isNew</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">{</span>
            <span class="k">didSet</span> <span class="p">{</span>
                <span class="n">willChange</span><span class="o">.</span><span class="nf">send</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">/// 사용자 금액</span>
        <span class="k">var</span> <span class="nv">userMoney</span> <span class="o">=</span> <span class="s">"0.00"</span>
        <span class="c1">/// 사용자 등급</span>
        <span class="k">var</span> <span class="nv">userGrade</span> <span class="o">=</span> <span class="s">"Premium"</span>
        <span class="c1">/// 전체 보기 여부</span>
        <span class="k">var</span> <span class="nv">isSeeAll</span> <span class="o">=</span> <span class="kc">false</span> <span class="p">{</span>
            <span class="k">didSet</span> <span class="p">{</span>
                <span class="k">if</span> <span class="o">!</span><span class="k">self</span><span class="o">.</span><span class="n">isSeeAll</span> <span class="p">{</span>
                    <span class="n">myCards</span> <span class="o">=</span> <span class="kt">Array</span><span class="p">(</span><span class="n">totalCards</span><span class="p">[</span><span class="mi">0</span><span class="o">...</span><span class="mi">1</span><span class="p">])</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">myCards</span> <span class="o">=</span> <span class="n">totalCards</span>
                <span class="p">}</span>
                <span class="n">willChange</span><span class="o">.</span><span class="nf">send</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">/// 화면에 표시할 카드 모델</span>
        <span class="k">var</span> <span class="nv">myCards</span> <span class="o">=</span> <span class="p">[</span><span class="kt">HomeCardInfo</span><span class="p">(),</span><span class="kt">HomeCardInfo</span><span class="p">()]</span>
    <span class="p">}</span>
</code></pre></div></div>
<p>그리고 View를 수정합니다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">struct</span> <span class="kt">MainContentsView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>

        <span class="kd">@ObjectBinding</span> <span class="k">var</span> <span class="nv">viewModel</span> <span class="o">=</span> <span class="kt">MainContentsViewModel</span><span class="p">()</span>

        <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
            <span class="kt">VStack</span> <span class="p">{</span>
                <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// 네비게이션바</span>
                    <span class="kt">HomeNavigationBar</span><span class="p">(</span><span class="nv">isNew</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">viewModel</span><span class="o">.</span><span class="n">isNew</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
                    <span class="c1">// 사용자 금액과 등급을 표시하는 부분</span>
                    <span class="kt">HomeUserInfoView</span><span class="p">(</span><span class="nv">userMoney</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">viewModel</span><span class="o">.</span><span class="n">userMoney</span><span class="p">,</span>
                                     <span class="nv">userGrade</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">viewModel</span><span class="o">.</span><span class="n">userGrade</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
                    <span class="c1">// 입급 출금 버튼 그룹</span>
                    <span class="kt">HomeButtonsView</span><span class="p">()</span>
                        <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">bottom</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
                <span class="p">}</span><span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">51</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                                   <span class="nv">green</span><span class="p">:</span> <span class="mi">104</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                                   <span class="nv">blue</span><span class="p">:</span> <span class="mi">252</span><span class="o">/</span><span class="mi">255</span><span class="p">))</span>
                <span class="c1">// 중간 내 카드 표시 부분</span>
                <span class="kt">HomeMyCardList</span><span class="p">(</span><span class="nv">isSeeAll</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">viewModel</span><span class="o">.</span><span class="n">isSeeAll</span><span class="p">,</span>
                               <span class="nv">myCards</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="err">$</span><span class="n">viewModel</span><span class="o">.</span><span class="n">myCards</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

                <span class="kt">Spacer</span><span class="p">()</span>

            <span class="p">}</span>
            <span class="o">.</span><span class="nf">edgesIgnoringSafeArea</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">edgesIgnoringSafeArea</span><span class="p">(</span><span class="o">.</span><span class="n">bottom</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>
<p>Flutter의 Bloc 패턴과는 조금 달라 보이지만 지향하는 목적 자체는 동일합니다. Flutter의 Bloc에서는 Action과 State를 분리 가지고 Action에 따라서 State를 넘겨주는 형식으로 로직과 화면을 분리했습니다. 하지만 여기서는 ViewModel 자체가 State를 가지고 있기 때문에 Action이 들어와서 ViewModel이 변경되면 뷰 모델을 바라보고 있는 View를 수정해서 화면을 갱신하고 있습니다.
 다음 포스트에서는 지금의 뷰 모델을 조금 더 MVVM 형태에 맞게 수정해보겠습니다.</p>

<h2 id="뷰-코드">뷰 코드</h2>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">/// 상단 네비게이션 뷰</span>
    <span class="kd">fileprivate</span> <span class="kd">struct</span> <span class="kt">HomeNavigationBar</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>

        <span class="kd">@Binding</span> <span class="k">var</span> <span class="nv">isNew</span><span class="p">:</span> <span class="kt">Bool</span>

        <span class="c1">// 네비게이션바</span>
        <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
            <span class="kt">HStack</span> <span class="p">{</span>
                <span class="kt">Text</span><span class="p">(</span><span class="s">"Wallet"</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.7</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="kt">Font</span><span class="o">.</span><span class="nf">system</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">design</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">bold</span><span class="p">()</span>

                <span class="kt">Spacer</span><span class="p">()</span>
                <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span>
                    <span class="k">self</span><span class="o">.</span><span class="n">isNew</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
                <span class="p">})</span> <span class="p">{</span>
                    <span class="kt">ZStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"bell.fill"</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
                            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">scaledToFit</span><span class="p">()</span>
                        <span class="kt">Circle</span><span class="p">()</span>
                            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">trailing</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="n">isNew</span> <span class="p">?</span> <span class="mf">1.0</span> <span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="err">```</span>
    <span class="err">```</span><span class="n">swift</span>
    <span class="c1">/// 사용자 정보가 표시되는 뷰</span>
    <span class="kd">fileprivate</span> <span class="kd">struct</span> <span class="kt">HomeUserInfoView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kd">@Binding</span> <span class="k">var</span> <span class="nv">userGrade</span><span class="p">:</span> <span class="kt">String</span>

        <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
            <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">HStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"$18 624.00"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="kt">Font</span><span class="o">.</span><span class="nf">system</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="nv">design</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">))</span>
                        <span class="o">.</span><span class="nf">bold</span><span class="p">()</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Image</span><span class="p">(</span><span class="s">"usdIcon"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">resizable</span><span class="p">()</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">scaledToFit</span><span class="p">()</span>
                <span class="p">}</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">bottom</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="kt">Rectangle</span><span class="p">()</span>
                    <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">minWidth</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                           <span class="nv">idealWidth</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
                           <span class="nv">maxWidth</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">height</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

                <span class="kt">Text</span><span class="p">(</span><span class="n">userGrade</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">bold</span><span class="p">()</span>
                    <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="err">```</span>
    <span class="err">```</span><span class="n">swift</span>
    <span class="c1">/// 버튼 그룹</span>
    <span class="kd">fileprivate</span> <span class="kd">struct</span> <span class="kt">HomeButtonsView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>

        <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
            <span class="kt">HStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span><span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">ZStack</span> <span class="p">{</span>
                    <span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">5</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">orange</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="p">(</span><span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">60</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">,</span>
                               <span class="nv">height</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                               <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>

                    <span class="kt">Text</span><span class="p">(</span><span class="s">"Deposit"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="kt">Font</span><span class="o">.</span><span class="nf">system</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">design</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">))</span>
                        <span class="o">.</span><span class="nf">bold</span><span class="p">()</span>
                <span class="p">}</span>
                <span class="kt">ZStack</span> <span class="p">{</span>
                    <span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="p">(</span><span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">60</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">,</span>
                               <span class="nv">height</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                               <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>

                    <span class="kt">Text</span><span class="p">(</span><span class="s">"Withdraw"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="kt">Font</span><span class="o">.</span><span class="nf">system</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nv">design</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">))</span>
                        <span class="o">.</span><span class="nf">bold</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="err">```</span>
    <span class="err">```</span><span class="n">swift</span>
    <span class="c1">/// 카드가 적용된 리스트뷰</span>
    <span class="kd">fileprivate</span> <span class="kd">struct</span> <span class="kt">HomeMyCardList</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>

        <span class="kd">@Binding</span> <span class="k">var</span> <span class="nv">isSeeAll</span><span class="p">:</span> <span class="kt">Bool</span>
        <span class="kd">@Binding</span> <span class="k">var</span> <span class="nv">myCards</span><span class="p">:</span> <span class="p">[</span><span class="kt">HomeCardInfo</span><span class="p">]</span>

        <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
            <span class="kt">VStack</span> <span class="p">{</span>
                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">Text</span><span class="p">(</span><span class="s">"Cards"</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">bold</span><span class="p">()</span>
                    <span class="kt">Spacer</span><span class="p">()</span>
                    <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span>
                        <span class="k">self</span><span class="o">.</span><span class="n">isSeeAll</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
                    <span class="p">})</span> <span class="p">{</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="s">"See All"</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="n">isSeeAll</span> <span class="p">?</span> <span class="kt">Color</span><span class="o">.</span><span class="nv">white</span> <span class="p">:</span> <span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.7</span><span class="p">))</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="kt">ForEach</span><span class="p">(</span><span class="n">myCards</span><span class="p">)</span> <span class="p">{</span> <span class="n">card</span> <span class="k">in</span>
                    <span class="kt">HomeCardInfoView</span><span class="p">(</span><span class="nv">card</span><span class="p">:</span> <span class="n">card</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="o">.</span><span class="nf">animation</span><span class="p">(</span><span class="o">.</span><span class="k">default</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
    <span class="err">```</span>
    <span class="err">```</span><span class="n">swift</span>
    <span class="c1">/// 홈 화면에서 표시되는 카드 정보</span>
    <span class="kd">struct</span> <span class="kt">HomeCardInfoView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>

        <span class="k">let</span> <span class="nv">card</span><span class="p">:</span> <span class="kt">HomeCardInfo</span>

        <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
            <span class="kt">ZStack</span> <span class="p">{</span>
                <span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">242</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                                           <span class="nv">green</span><span class="p">:</span> <span class="mi">244</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span>
                                           <span class="nv">blue</span><span class="p">:</span> <span class="mi">248</span><span class="o">/</span><span class="mi">255</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">minWidth</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                           <span class="nv">idealWidth</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
                           <span class="nv">maxWidth</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">height</span><span class="p">:</span> <span class="mi">80</span><span class="p">)</span>

                <span class="kt">HStack</span> <span class="p">{</span>
                    <span class="kt">RoundedRectangle</span><span class="p">(</span><span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
                        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>

                    <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="n">card</span><span class="o">.</span><span class="n">cardName</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="kt">Font</span><span class="o">.</span><span class="nf">system</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="nv">design</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">))</span>
                            <span class="o">.</span><span class="nf">bold</span><span class="p">()</span>
                        <span class="kt">Spacer</span><span class="p">()</span>
                        <span class="kt">Text</span><span class="p">(</span><span class="s">"</span><span class="se">\(</span><span class="n">card</span><span class="o">.</span><span class="n">typeName</span><span class="se">)</span><span class="s"> * </span><span class="se">\(</span><span class="n">card</span><span class="o">.</span><span class="n">frontCardNumber</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
                            <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="kt">Font</span><span class="o">.</span><span class="nf">system</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="nv">design</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">))</span>
                            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">black</span><span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
                    <span class="p">}</span>
                    <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">height</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">center</span><span class="p">)</span>

                    <span class="kt">Spacer</span><span class="p">()</span>

                    <span class="kt">Text</span><span class="p">(</span><span class="s">"$</span><span class="se">\(</span><span class="n">card</span><span class="o">.</span><span class="n">money</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            this.page.url = 'https://leejigun.github.io//';
                            this.page.identifier = 'iOS 삽질 블로그';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://jglee.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; iOS 삽질 블로그 &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/swiftui/">Swiftui</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/WWDC22_Navigation_Cook_book_in_SwiftUI">[WWDC22] Navigation Cook book in SwiftUI</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/SwiftUI_overview">SwiftUI 개요</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/SwiftUI_page_based_navigation">SwiftUI에서 page based navigation 사용하기</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/swiftui/">
                                
                                    See all 11 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/SwftUI,Combine,MVVM_2)-Financing">
                <div class="post-card-image" style="background-image: url(/assets/images/SwiftUI/Financing_App_Volume_1.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/SwftUI,Combine,MVVM_2)-Financing">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Swiftui</span>
                            
                        
                    

                    <h2 class="post-card-title">SwiftUI, Combine, MVVM 2) - Financing UI</h2>
                </header>
                <section class="post-card-excerpt">
                    <p># SwiftUI, Combine, MVVM 1) - Financing MVVM을 중점으로 저번 [포스트](https://leejigun.github.io/SwftUI,Combine,MVVM_1)-Financing)에서 SwiftUI를 사용해 예제 디자인의 절반 정도 화면을 만들어보고 State를 이용해 MVVM viewModel을 만들어봤다. 사실 저번에 만든 viewModel은 MVVM 아키텍처를 구체화했다고 하기 뭐할</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/Swift_Moya_Provider_custom">
                <div class="post-card-image" style="background-image: url(/assets/images/ios/moya.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/Swift_Moya_Provider_custom">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Ios</span>
                            
                        
                    

                    <h2 class="post-card-title">Swift Moya Provider 커스텀</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>Swift Moya Provider 커스텀 예전에 Moya + RxSwift에 대한 포스트를 올린적이 있었는데, 이번에는 제가 프로젝트에서 사용하고 있는 Moya Provider를 커스텀 한 내용을 공유하고자 합니다. Plugins moya plugun : https://github.com/Moya/Moya/blob/master/docs/Plugins.md Moya 는 기본적으로 Target</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://leejigun.github.io//">
            
                <img src="/assets/images/blog-icon.png" alt="iOS 삽질 블로그 icon" />
            
            <span>iOS 삽질 블로그</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">SwiftUI, Combine, MVVM 1) - Financing UI</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=SwiftUI%2C+Combine%2C+MVVM+1%29+-+Financing+UI&amp;url=https://leejigun.github.io/SwftUI,Combine,MVVM_1)-Financing"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://leejigun.github.io/SwftUI,Combine,MVVM_1)-Financing"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://leejigun.github.io//">iOS 삽질 블로그</a> &copy; 2023</section>
                <section class="poweredby">Github page blog of <a href="https://github.com/Leejigun">Leejigun</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <!-- <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a> -->
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-154736789-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
